<div class="p-4 fadein animation-duration-500">
  <a routerLink="/leads" class="text-500 no-underline hover:text-green-600 mb-3 block text-sm font-bold">
    <i class="pi pi-arrow-left mr-1"></i> Voltar para Leads
  </a>

  <div class="surface-card p-4 shadow-1 border-round mb-4">
    <div class="flex justify-content-between align-items-start mb-4">
      <div class="flex align-items-center gap-3">
        <i class="pi pi-star-fill text-yellow-500 text-2xl"></i>
        <div>
          <h1 class="text-3xl font-bold m-0 text-900 flex align-items-center gap-3">
            {{ lead.name }}
            <p-tag [value]="lead.status" severity="warning"></p-tag>
          </h1>
        </div>
      </div>
      <div class="flex gap-2">
        <button pButton label="Editar" icon="pi pi-pencil" class="p-button-outlined p-button-secondary"></button>
        <button pButton label="Excluir" icon="pi pi-trash" class="p-button-outlined p-button-danger"></button>
      </div>
    </div>

    <div class="grid mb-4 text-sm">
        <div class="col-12 md:col-3">
            <div class="bg-gray-50 p-2 border-round"><span class="block text-500 mb-1">CPF</span><b>{{lead.cpf}}</b></div>
        </div>
        <div class="col-12 md:col-3">
            <div class="bg-gray-50 p-2 border-round"><span class="block text-500 mb-1">Área Total</span><b>{{lead.area}} ha</b></div>
        </div>
        <div class="col-12 md:col-3">
            <div class="bg-gray-50 p-2 border-round"><span class="block text-500 mb-1">Propriedades</span><b>{{lead.propertiesCount}}</b></div>
        </div>
        <div class="col-12 md:col-3">
            <div class="bg-gray-50 p-2 border-round"><span class="block text-500 mb-1">Criado em</span><b>{{lead.createdAt}}</b></div>
        </div>
    </div>
    
    <div class="bg-gray-50 p-3 border-round text-600 text-sm">
        <i class="pi pi-file mr-1"></i> {{lead.obs}}
    </div>
  </div>

  <div class="flex justify-content-between align-items-center mb-3">
      <h3 class="m-0 text-xl font-bold">Propriedades Rurais (2)</h3>
      <button pButton label="Nova Propriedade" icon="pi pi-plus" class="p-button-success" (click)="showModal()"></button>
  </div>

  <div class="surface-card p-0 shadow-1 border-round mb-4 overflow-hidden">
     <div class="p-2 bg-gray-50 border-bottom-1 surface-border text-sm font-medium">
         <i class="pi pi-map mr-1"></i> Localização das Propriedades
     </div>
     <div id="detail-map" style="height: 250px;"></div>
  </div>

  <div class="grid">
      <div class="col-12 md:col-6">
          <div class="surface-card shadow-1 p-3 border-round border-left-3 border-yellow-500">
              <div class="font-bold text-lg mb-2"><i class="pi pi-sun text-yellow-500 mr-2"></i>Fazenda Santa Clara</div>
              <div class="text-sm text-500 mb-2"><i class="pi pi-map-marker"></i> Uberlândia | 250 ha</div>
              <p-tag value="Soja" severity="success"></p-tag>
          </div>
      </div>
      <div class="col-12 md:col-6">
        <div class="surface-card shadow-1 p-3 border-round border-left-3 border-yellow-500">
            <div class="font-bold text-lg mb-2"><i class="pi pi-sun text-yellow-500 mr-2"></i>Fazenda Boa Vista</div>
            <div class="text-sm text-500 mb-2"><i class="pi pi-map-marker"></i> Uberlândia | 200 ha</div>
            <p-tag value="Milho" severity="warning"></p-tag>
        </div>
    </div>
  </div>
</div>

<p-dialog header="Nova Propriedade" [(visible)]="displayModal" [modal]="true" [style]="{width: '85vw'}" [draggable]="false">
    <div class="grid p-fluid">
        <div class="col-12 md:col-6 p-3">
            <div class="field">
                <label>Nome da Propriedade</label>
                <input pInputText [(ngModel)]="newProperty.nome" placeholder="Ex: Fazenda Santa Clara">
            </div>
            <div class="grid">
                <div class="col-6 field">
                    <label>Município</label>
                    <p-dropdown [options]="['Uberlândia', 'Uberaba']" [(ngModel)]="newProperty.municipio" placeholder="Selecione..."></p-dropdown>
                </div>
                <div class="col-6 field">
                    <label>Cultura</label>
                    <p-dropdown [options]="['Soja', 'Milho']" [(ngModel)]="newProperty.cultura" placeholder="Selecione..."></p-dropdown>
                </div>
            </div>
            <div class="field">
                <label>Área (hectares)</label>
                <p-inputNumber [(ngModel)]="newProperty.area" placeholder="0"></p-inputNumber>
            </div>
            <div class="field">
                <label>Observações</label>
                <textarea pInputTextarea [(ngModel)]="newProperty.obs" rows="3" placeholder="Informações adicionais..."></textarea>
            </div>
        </div>
        <div class="col-12 md:col-6">
            <div id="modal-map" class="w-full h-full border-round shadow-1" style="min-height: 400px;"></div>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <button pButton label="Cancelar" class="p-button-text p-button-secondary" (click)="displayModal=false"></button>
        <button pButton label="Criar Propriedade" class="p-button-success" (click)="saveProperty()"></button>
    </ng-template>
</p-dialog>